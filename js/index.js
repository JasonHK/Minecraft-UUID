"use strict";const usernamePattern=/^([A-Za-z0-9_]){3,16}$/g,headerIcons=Object.freeze({user:1,clock:2,ok:3,cancel:4}),sections=Object.freeze({query:1,loading:2,result:3,error:4});function initialization(){}function switchHeader(e){let t=mainHeader.querySelector("div.icon > i");switch(e){case headerIcons.user:t.className="icon-user";break;case headerIcons.clock:t.className="icon-clock";break;case headerIcons.ok:t.className="icon-ok";break;case headerIcons.cancel:t.className="icon-cancel"}}function isUsernameValid(e){return usernamePattern.test(e)}function switchSection(e){switch(mainApp.querySelector("section.main-section:not([hidden])").setAttribute("hidden",""),e){case sections.query:sectionQuery.removeAttribute("hidden"),switchHeader(headerIcons.user);break;case sections.loading:sectionLoading.removeAttribute("hidden"),switchHeader(headerIcons.clock);break;case sections.result:sectionResult.removeAttribute("hidden"),switchHeader(headerIcons.ok);break;case sections.error:sectionError.removeAttribute("hidden"),switchHeader(headerIcons.cancel)}}let mainApp=document.body.querySelector("main#app"),mainHeader=mainApp.querySelector("header#main"),sectionQuery=mainApp.querySelector("section#query"),sectionLoading=mainApp.querySelector("section#loading"),sectionResult=mainApp.querySelector("section#result"),sectionError=mainApp.querySelector("section#error");function queryValidation(){let e=sectionQuery.querySelector("form#query"),t=e.querySelector("input#username"),r=e.querySelector("p#message");return t.validity.valid?(t.classList.remove("invalid"),r.textContent="",r.classList.add("hidden"),!0):(t.classList.add("invalid"),r.textContent="",r.classList.remove("hidden"),t.validity.valueMissing?r.textContent="Please insert a username.":t.validity.tooShort||t.validity.tooLong?r.textContent="The length must between 3 to 16 character long.":t.validity.patternMismatch?r.textContent="The username has one or more invalid characters.":r.textContent="Unknown error.",t.focus(),t.select(),!1)}function querySubmit(){let e=sectionQuery.querySelector("form#query").querySelector("input#username");queryValidation()&&(switchSection(sections.loading),getUserInfo(e.value).then(function(e){let t=sectionResult.querySelector("form#result").querySelector("input#uuid");if(t.value=e.id,switchSection(sections.result),"069a79f444e94726a5befca90e38aaf5"==t.value){mainHeader.querySelector("div.icon > i").className="notch-apple"}t.focus()}).catch(function(e){sectionError.querySelector("form#error").querySelector("p#error").textContent=e,switchSection(sections.error)}))}function returnHome(){let e=sectionQuery.querySelector("form#query").querySelector("input#username");switchSection(sections.query),e.focus(),e.select()}window.addEventListener("DOMContentLoaded",function(e){let t=sectionQuery.querySelector("form#query");t.querySelector("input#username").value="",t.addEventListener("submit",function(e){queryValidation()||e.preventDefault()},!1);let r=sectionResult.querySelector("form#result"),n=r.querySelector("input#uuid");n.value="",n.addEventListener("click",function(e){n.focus(),n.select()});let o=r.querySelector("button#copy"),c=new ClipboardJS("form#result button#copy");c.on("success",function(e){o.innerHTML="COPIED!",o.classList.add("success"),e.clearSelection(),setTimeout(function(){o.innerHTML="COPY",o.classList.remove("success")},5e3)}),c.on("error",function(e){n.focus(),n.select()})},!1),"serviceWorker"in navigator&&navigator.serviceWorker.register("/js/worker.js",{scope:"/"});