"use strict";const usernamePattern=/^([A-Za-z0-9_]){3,16}$/g,headerIcons=Object.freeze({user:1,clock:2,ok:3,cancel:4}),sections=Object.freeze({query:1,loading:2,result:3,error:4});function initialization(){}function switchHeader(e){let t=mainHeader.querySelector("div.icon > i");switch(e){case headerIcons.user:t.className="icon-user";break;case headerIcons.clock:t.className="icon-clock";break;case headerIcons.ok:t.className="icon-ok";break;case headerIcons.cancel:t.className="icon-cancel"}}function isUsernameValid(e){return usernamePattern.test(e)}function switchSection(e){switch(mainApp.querySelector("section.main-section:not([hidden])").setAttribute("hidden",""),e){case sections.query:sectionQuery.removeAttribute("hidden"),switchHeader(headerIcons.user);break;case sections.loading:sectionLoading.removeAttribute("hidden"),switchHeader(headerIcons.clock);break;case sections.result:sectionResult.removeAttribute("hidden"),switchHeader(headerIcons.ok);break;case sections.error:sectionError.removeAttribute("hidden"),switchHeader(headerIcons.cancel)}}let mainApp=document.body.querySelector("main#app"),mainHeader=mainApp.querySelector("header#main"),sectionQuery=mainApp.querySelector("section#query"),sectionLoading=mainApp.querySelector("section#loading"),sectionResult=mainApp.querySelector("section#result"),sectionError=mainApp.querySelector("section#error");function queryValidation(){let e=sectionQuery.querySelector("form#query"),t=e.querySelector("input#username"),n=e.querySelector("p#message");return t.validity.valid?(t.classList.remove("invalid"),n.textContent="",n.classList.add("hidden"),!0):(t.classList.add("invalid"),n.textContent="",n.classList.remove("hidden"),t.validity.valueMissing?n.textContent="Please insert a username.":t.validity.tooShort||t.validity.tooLong?n.textContent="The length must between 3 to 16 character long.":t.validity.patternMismatch?n.textContent="The username has one or more invalid characters.":n.textContent="Unknown error.",t.focus(),t.select(),!1)}function querySubmit(){let e=sectionQuery.querySelector("form#query").querySelector("input#username");queryValidation()&&(switchSection(sections.loading),getUserInfo(e.value).then(function(e){let t=sectionResult.querySelector("form#result").querySelector("input#uuid");if(t.value=e.id,switchSection(sections.result),"069a79f444e94726a5befca90e38aaf5"==t.value){mainHeader.querySelector("div.icon > i").className="notch-apple"}t.focus()}).catch(function(e){sectionError.querySelector("form#error").querySelector("p#error").textContent=e,switchSection(sections.error)}))}function returnHome(){let e=sectionQuery.querySelector("form#query").querySelector("input#username");switchSection(sections.query),e.focus(),e.select()}window.addEventListener("DOMContentLoaded",function(e){let t=sectionQuery.querySelector("form#query");t.querySelector("input#username").value="",t.addEventListener("submit",function(e){queryValidation()||e.preventDefault()},!1);let n=sectionResult.querySelector("form#result"),r=n.querySelector("input#uuid");r.value="",r.addEventListener("click",function(e){r.focus(),r.select()});let o=n.querySelector("button#copy"),c=new ClipboardJS("form#result button#copy");c.on("success",function(e){o.innerHTML="COPIED!",o.classList.add("success"),e.clearSelection(),setTimeout(function(){o.innerHTML="COPY",o.classList.remove("success")},5e3)}),c.on("error",function(e){r.focus(),r.select()})},!1),"serviceWorker"in navigator&&navigator.serviceWorker.register("/js/worker.js");var CACHE="mc-uuid";function precache(){return caches.open(CACHE).then(function(e){return e.addAll(["/","/index.html","/css","/font","/js"])})}function fromCache(e){return caches.open(CACHE).then(function(t){return t.match(e).then(function(e){return e||Promise.reject("no-match")})})}function update(e){return caches.open(CACHE).then(function(t){return fetch(e).then(function(n){return t.put(e,n)})})}self.addEventListener("install",function(e){console.log("The service worker is being installed."),e.waitUntil(precache())}),self.addEventListener("fetch",function(e){console.log("The service worker is serving the asset."),e.respondWith(fromCache(e.request)),e.waitUntil(update(e.request))});